angular.module("tt-tinymce",[]).directive("ttTinymce",[function(){var t=0;return{restrict:"AC",require:"ngModel",scope:!1,link:function(n,e,i,o){var r;i.id||i.$set("id","tt-tinymce-"+t++);var a=function(t){t=angular.extend(t||{},{selector:"#"+i.id,setup:function(t){r=t;var e=function(){var e=t.getContent();o.$viewValue!==e&&(o.$setViewValue(e),n.$root.$$phase||n.$apply())};t.on("change",e),t.on("KeyUp",e),t.on("ExecCommand",e)}}),tinyMCE.init(t)},c=function(){r&&(r.save(),r.remove(),r=null)};n.destroy=c,n.$on("$destroy",c),i.ttTinymce?n.$watch(i.ttTinymce,function(t){t&&(c(),a(t))}):a(),n.$watch(i.ngModel,function(t){if(r){var n=r.getContent();angular.isString(t)&&n!==t&&r.setContent(t)}})}}}]);